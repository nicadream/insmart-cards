<script>
  // ... весь код выше не меняем ...

  async function loadImagesFromGitHub() {
    try {
      const apiUrl =
        'https://api.github.com/repos/' +
        encodeURIComponent(GITHUB_OWNER) + '/' +
        encodeURIComponent(GITHUB_REPO) +
        '/contents/' + encodeURIComponent(IMAGE_PATH) +
        '?ref=' + encodeURIComponent(GITHUB_BRANCH);

      const res = await fetch(apiUrl);
      if (!res.ok) throw new Error('GitHub API error: ' + res.status);

      const data = await res.json();
      if (!Array.isArray(data)) {
        setStatus('Не удалось прочитать папку');
        return;
      }

      const files = data.filter(item => {
        if (item.type !== 'file') return false;
        const n = item.name.toLowerCase();
        return IMAGE_EXTS.some(ext => n.endsWith(ext));
      });

      IMAGE_URLS = files.map(item => item.download_url);

      if (!IMAGE_URLS.length) {
        setStatus('Нет картинок');
        return;
      }

      hideStatus();
      showSlide(0);

    } catch (err) {
      console.error(err);
      setStatus('Ошибка загрузки из GitHub');
    }
  }

  loadImagesFromGitHub().then(() => {
    // страховка, чтобы автолистание запускалось всегда
    setTimeout(() => {
      if (IMAGE_URLS.length > 0) {
        startTimer();
      }
    }, 500);
  });
</script>
